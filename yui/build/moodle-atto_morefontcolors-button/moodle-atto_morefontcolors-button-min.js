YUI.add("moodle-atto_morefontcolors-button",function(e,t){var n='<form id="atto_morefontcolors_dialogue"><div class="picker"><div id="atto_morefontcolors_dialogue_hue-dial"></div><div class="sliders"><div id="atto_morefontcolors_dialogue_sat-slider"><strong>{{get_string "saturation" component}}<span></span></strong></div><div id="atto_morefontcolors_dialogue_lum-slider"><strong>{{get_string "luminance" component}}<span></span></strong></div></div><div class="color"></div></div><div class="yui3-g picker-output"><div class="yui3-u-1-3"><strong>{{get_string "hexadecimal" component}}</strong><input type="text" id="atto_morefontcolors_dialogue_hex-output"></div><div class="yui3-u-1-3"><strong>{{get_string "rgb" component}}</strong><input type="text" id="atto_morefontcolors_dialogue_rgb-output"></div><div class="yui3-u-1-3"><strong>{{get_string "hsl" component}}</strong><input type="text" id="atto_morefontcolors_dialogue_hsl-output"></div></div><div class="mdl-align"><button type="submit" class="submit">{{get_string "submit" component}}</button></div></form>';e.namespace("M.atto_morefontcolors").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{_currentSelection:null,_content:null,initializer:function(t){var n=[],r=this.get("colors");e.Array.each(r,function(e){if(e.trim()){var t=e.split(/\s+/),r="";for(var i=0;i<t.length;i++){var s=t[i].trim();/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(s)&&(r=r+'<div style="width: 20px; margin-right: 5px; height: 20px; border: 1px solid #CCC; background-color: '+s+'" data-color="'+s+'"></div>')}n.push({text:r,callback:this._changeStyle})}}),t.allowcustom==="1"&&n.push({text:'<div style="width: 20px; height: 20px; border: 1px solid #CCC;" id="atto_morefontcolors_customicon"></div>',callbackArgs:"custom",callback:this._changeStyle}),this.addToolbarMenu({icon:"e/text_color",overlayWidth:"4",menuColor:"#333333",globalItemConfig:{inlineFormat:!0,callback:this._changeStyle},items:n})},_changeStyle:function(e,t){t==="custom"?this._customColor():this.get("host").formatSelectionInlineStyle({color:e.target.getAttribute("data-color")})},_customColor:function(){var t=e.Handlebars.compile(n),r=this.getDialogue({headerContent:M.util.get_string("customcolor","atto_morefontcolors"),width:"470px",focusAfterHide:!0});this._currentSelection=this.get("host").getSelection(),this._content=e.Node.create(t({component:"atto_morefontcolors"})),r.set("bodyContent",this._content).show(),this._initiateColorPicker(),this._content.one(".submit").on("click",function(t){t.preventDefault(),this.getDialogue({focusAfterHide:null}).hide();var n=e.one("#atto_morefontcolors_dialogue_rgb-output").get("value");this.get("host").setSelection(this._currentSelection),this.get("host").formatSelectionInlineStyle({color:n})},this)},_initiateColorPicker:function(){YUI().use("dial","slider","event-valuechange","color",function(e){e.one("#atto_morefontcolors_dialogue .picker").addClass("yui3-skin-sam");var t=new e.Dial({min:0,max:360,stepsPerRevolution:360,continuous:!0,centerButtonDiameter:.4,render:"#atto_morefontcolors_dialogue_hue-dial"}),n=new e.Slider({min:0,max:100,value:100,render:"#atto_morefontcolors_dialogue_sat-slider"}),r=new e.Slider({min:0,max:100,value:50,render:"#atto_morefontcolors_dialogue_lum-slider"}),i=e.one("#atto_morefontcolors_dialogue #atto_morefontcolors_dialogue_sat-slider span"),s=e.one("#atto_morefontcolors_dialogue #atto_morefontcolors_dialogue_lum-slider span"),o=e.one("#atto_morefontcolors_dialogue .color"),u=e.one("#atto_morefontcolors_dialogue #atto_morefontcolors_dialogue_hex-output"),a=e.one("#atto_morefontcolors_dialogue #atto_morefontcolors_dialogue_rgb-output"),f=e.one("#atto_morefontcolors_dialogue #atto_morefontcolors_dialogue_hsl-output"),l=null,c=function(e){l=e.currentTarget},h=function(e){l===e.currentTarget&&(l=null)},p=function(t){u!==l&&u.set("value",e.Color.toHex(t)),a!==l&&a.set("value",e.Color.toRGB(t)),f!==l&&f.set("value",t)},d=function(e){typeof e.h!="undefined"&&t.set("value",+e.h),typeof e.s!="undefined"&&n.set("value",+e.s),typeof e.l!="undefined"&&r.set("value",+e.l)},v=function(t){var n=t.newVal,r=[];e.Color.toArray(n)&&(r=e.Color.toArray(e.Color.toHSL(n)),d({h:r[0],s:r[1],l:r[2]}))},m=function(){var u=t.get("value"),a=n.get("value"),f=r.get("value"),l=e.Color.fromArray([u,a,f],e.Color.TYPES.HSL),c=e.Color.toHex(l);i.set("text",a+"%"),s.set("text",f+"%"),o.setStyle("backgroundColor",c),p(l)};u.on("focus",c),u.on("blur",h),u.on("valueChange",v),a.on("focus",c),a.on("blur",h),a.on("valueChange",v),f.on("focus",c),f.on("blur",h),f.on("valueChange",v),t.after("valueChange",function(){m()}),n.after("thumbMove",function(){m()}),r.after("thumbMove",function(){s.set("text",r.get("value")+"%"),m()}),m()})}},{ATTRS:{colors:{value:{}}}},{ATTRS:{colors:{value:{}}}})},"@VERSION@");
